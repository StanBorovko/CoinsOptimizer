# CoinsOptimizer
Find coins order optimal for paying 

Описание алгоритма:

1. На основе создается массив водителей со случайными порядками оплаты.
2. Для каждого водителя вычисляется суммарая задоженность после прохождения заданного маршрута.
3. Массив данных по задолженностям сортируется и остеиваются водители с меньшими задолженностями.
4. Производится скрещивание: 
    4.1 Случайным образом выбирается место разбиения массивов с монтеами двух родитеських водителей.
    4.2 Созадется новый массив с монетами: первая часть - от первого родителя, вторая - от дургого.
    4.3 Новый водиетль проверяется на валидность (чтобы все монеты были разные), если проходи проверку = возвращается новый водитель, если нет - первый родитель.
5. Производится мутация:
    5.1 Выбираются случайные водители.
    5.2 Для кажого водителя переставляем местами несколько пар монет.
    5.3 Возвращаем новый массив с водителями (отсееные, скрещеные, мутировавшие)
6. Вычисляем задолженность для нового массива водителей.
7. Заново отсеиваем водителей с меньшими задолженностями.
8. Если массив заново отсеянных равен массиву предварительно отсеянных или достигнуто максимальное количество повторений, следовательно оптимальное решение найдено и алгорим заканчивает работу. В противном случае возвращаемся в п.4.

Примечания: 
1. На этапах скрещивания и мутации возможно получение невалидного водителя, т.е. у которого будут несколько монет одного достоинства, что противоречит условию задачи. Поэтому для скрещивания я в случае невалидности использую первого родителя вместо потомка, а мутацию провожу заново, пока не получу валидного водителя.
2. Мутация осуществляется путем перестановки пары монет со случайными индексами.
3. Для задействования на этапе скрещивания всех водителей, я их выбираю поочередно и попарно: 1+2, 2+3, 3+4,..., n-1+n, n+1, ...
4. Эмпирически обнаружил, что на одном и том же тестовом массиве с водителями алгоритм без этапа мутации дает очень устойчивый результат: при многих повторениях расчетов получается одинаковый оптимальный результат. С этапом мутации результат может колебаться от раза к разу, при этом возможно получение как худшего так и лучшего оптимального порядка монет. Возможно для варианта с мутацией следует выполнить еще ряд действий по анализу ответа. Поэтому я отключил по умолчанию этап мутации, но оставил возможность включить и сам его код для демонстрации.
5. Сделал возможность включения/выключения тестового режима: в тестовом режиме массив с водителями всегда одинаковый, вне его - каждый раз случайные исходные водители.


Источники:
1. https://habr.com/ru/post/128704/
2. https://ru.wikipedia.org/wiki/Генетический_алгоритм
